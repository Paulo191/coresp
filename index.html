<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Consulta de Órgãos</title>
<style>
    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background-color: #f5f5f7;
        margin: 0;
        padding: 0;
    }

    .container {
        max-width: 900px;
        margin: auto;
        padding: 20px;
    }

    h1 {
        text-align: center;
        margin-bottom: 20px;
    }

    .filtros {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-bottom: 20px;
    }

    #search, select {
        padding: 10px;
        border-radius: 8px;
        border: 1px solid #ccc;
        flex: 1;
        min-width: 180px;
    }

    .orgao {
        background-color: #fff;
        border-radius: 14px;
        padding: 16px;
        margin-bottom: 12px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        cursor: pointer;
        transition: transform 0.45s cubic-bezier(0.4, 0, 0.2, 1), 
                    box-shadow 0.45s cubic-bezier(0.4, 0, 0.2, 1), 
                    background 0.45s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .orgao:hover {
        transform: translateY(-6px) scale(1.04);
        box-shadow: 0 12px 28px rgba(0,0,0,0.12);
        background: linear-gradient(180deg, #ffffff 0%, #f8f8fa 100%);
    }

    .detalhes {
        display: none;
        margin-top: 10px;
        font-size: 14px;
        color: #555;
    }

    .orgao.ativo .detalhes {
        display: block;
        animation: fadeIn 0.4s ease;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(-5px); }
        to { opacity: 1; transform: translateY(0); }
    }
</style>
</head>
<body>

<div class="container">
    <h1>Consulta de Órgãos</h1>

    <div class="filtros">
        <input type="text" id="search" placeholder="Buscar por qualquer campo...">

        <select id="filtroTipo">
            <option value="">Todos os tipos</option>
            <option value="Interno">Interno</option>
            <option value="Externo Conveniado">Externo Conveniado</option>
            <option value="Externo">Externo</option>
        </select>

        <select id="filtroEstado">
            <option value="">Todos os estados</option>
            <option value="Ceará">Ceará</option>
            <option value="Rio Grande do Norte">Rio Grande do Norte</option>
            <option value="Distrito Federal">Distrito Federal</option>
        </select>

        <select id="filtroConveniado">
            <option value="">Todos</option>
            <option value="Sim">Conveniado</option>
            <option value="Não">Não Conveniado</option>
        </select>
    </div>

    <div id="lista"></div>
</div>

<script>
    const search = document.getElementById('search');
    const filtroTipo = document.getElementById('filtroTipo');
    const filtroEstado = document.getElementById('filtroEstado');
    const filtroConveniado = document.getElementById('filtroConveniado');
    const lista = document.getElementById('lista');

    let dados = [];

    function normalizar(str) {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase();
    }

    function renderLista(filtrados) {
        lista.innerHTML = '';
        filtrados.forEach(orgao => {
            const div = document.createElement('div');
            div.classList.add('orgao');
            div.innerHTML = `<strong>${orgao["Órgão de execução"]}</strong>
                <div class="detalhes">
                    <p><strong>Órgão Superior:</strong> ${orgao["Órgão superior"]}</p>
                    <p><strong>Sigla:</strong> ${orgao["Sigla"]}</p>
                    <p><strong>Estado:</strong> ${orgao["Estado"]}</p>
                    <p><strong>Conveniado:</strong> ${orgao["Conveniado"]}</p>
                    <p><strong>Responde Sapiens?:</strong> ${orgao["Responde Sapiens?"]}</p>
                    <p><strong>Telefone:</strong> ${orgao["Telefone"]}</p>
                    <p><strong>Email:</strong> ${orgao["Email"]}</p>
                </div>`;
            div.addEventListener('click', () => {
                div.classList.toggle('ativo');
            });
            lista.appendChild(div);
        });
    }

    function filtrar() {
        const query = normalizar(search.value);
        const tipo = filtroTipo.value;
        const estado = filtroEstado.value;
        const conveniado = filtroConveniado.value;

        const filtrados = dados.filter(item => {
            const atendeBusca = Object.values(item).some(valor => normalizar(String(valor)).includes(query));
            const atendeTipo = !tipo || item["Tipo"] === tipo;
            const atendeEstado = !estado || item["Estado"] === estado;
            const atendeConveniado = !conveniado || item["Conveniado"] === conveniado;
            return atendeBusca && atendeTipo && atendeEstado && atendeConveniado;
        });

        renderLista(filtrados);
    }

    search.addEventListener('input', filtrar);
    filtroTipo.addEventListener('change', filtrar);
    filtroEstado.addEventListener('change', filtrar);
    filtroConveniado.addEventListener('change', filtrar);

    fetch('dados.json')
        .then(res => res.json())
        .then(json => {
            dados = json;
            renderLista(dados);
        });
</script>

</body>
</html>